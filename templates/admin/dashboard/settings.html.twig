{% extends 'base.html.twig' %}

{% block title %}System Settings{% endblock %}

{% block body %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h1 class="h3 mb-0">System Settings</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="list-group">
                        <a href="#general" class="list-group-item list-group-item-action active" data-bs-toggle="list">
                            <i class="fas fa-cog me-2"></i>General Settings
                        </a>
                        <a href="#roles" class="list-group-item list-group-item-action" data-bs-toggle="list">
                            <i class="fas fa-users-cog me-2"></i>Role Management
                        </a>
                        <a href="#appearance" class="list-group-item list-group-item-action" data-bs-toggle="list">
                            <i class="fas fa-paint-brush me-2"></i>Appearance
                        </a>
                        <a href="#notifications" class="list-group-item list-group-item-action" data-bs-toggle="list">
                            <i class="fas fa-bell me-2"></i>Notifications
                        </a>
                        <a href="#security" class="list-group-item list-group-item-action" data-bs-toggle="list">
                            <i class="fas fa-shield-alt me-2"></i>Security
                        </a>
                        <a href="#backup" class="list-group-item list-group-item-action" data-bs-toggle="list">
                            <i class="fas fa-database me-2"></i>Backup & Restore
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-9">
            <div class="tab-content">
                <!-- General Settings -->
                <div class="tab-pane fade show active" id="general">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title mb-4">General Settings</h5>
                            <form>
                                <div class="mb-3">
                                    <label for="site_name" class="form-label">Site Name</label>
                                    <input type="text" class="form-control" id="site_name" value="DA Portal">
                                </div>
                                <div class="mb-3">
                                    <label for="site_description" class="form-label">Site Description</label>
                                    <textarea class="form-control" id="site_description" rows="3">Department of Agriculture Portal for Import/Export Documentation</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="contact_email" class="form-label">Contact Email</label>
                                    <input type="email" class="form-control" id="contact_email" value="support@daportal.gov.ph">
                                </div>
                                <div class="mb-3">
                                    <label for="timezone" class="form-label">Timezone</label>
                                    <select class="form-select" id="timezone">
                                        <option value="Asia/Manila" selected>Asia/Manila (GMT+8)</option>
                                        <option value="UTC">UTC</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="date_format" class="form-label">Date Format</label>
                                    <select class="form-select" id="date_format">
                                        <option value="Y-m-d" selected>YYYY-MM-DD</option>
                                        <option value="d/m/Y">DD/MM/YYYY</option>
                                        <option value="m/d/Y">MM/DD/YYYY</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Role Management -->
                <div class="tab-pane fade" id="roles">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h5 class="card-title mb-0">Role Management</h5>
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newRoleModal">
                                    <i class="fas fa-plus me-2"></i>New Role
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Role Name</th>
                                            <th>Description</th>
                                            <th>Users</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Administrator</td>
                                            <td>Full system access and control</td>
                                            <td>5</td>
                                            <td>
                                                <button type="button" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editRoleModal">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>BAI Staff</td>
                                            <td>BAI-specific operations and approvals</td>
                                            <td>15</td>
                                            <td>
                                                <button type="button" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editRoleModal">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>BFAR Staff</td>
                                            <td>BFAR-specific operations and approvals</td>
                                            <td>12</td>
                                            <td>
                                                <button type="button" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editRoleModal">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>BPI Staff</td>
                                            <td>BPI-specific operations and approvals</td>
                                            <td>8</td>
                                            <td>
                                                <button type="button" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editRoleModal">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Client</td>
                                            <td>Basic user access for submissions</td>
                                            <td>416</td>
                                            <td>
                                                <button type="button" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editRoleModal">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Appearance -->
                <div class="tab-pane fade" id="appearance">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title mb-4">Appearance Settings</h5>
                            <form>
                                <div class="mb-4">
                                    <label class="form-label">Logo</label>
                                    <div class="d-flex align-items-center">
                                        <img src="https://via.placeholder.com/200x80" alt="Current Logo" class="me-3">
                                        <div>
                                            <input type="file" class="form-control" id="logo">
                                            <div class="form-text">Recommended size: 200x80 pixels. Max file size: 2MB.</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="form-label">Favicon</label>
                                    <div class="d-flex align-items-center">
                                        <img src="https://via.placeholder.com/32x32" alt="Current Favicon" class="me-3">
                                        <div>
                                            <input type="file" class="form-control" id="favicon">
                                            <div class="form-text">Recommended size: 32x32 pixels. Max file size: 1MB.</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="color_scheme" class="form-label">Color Scheme</label>
                                    <select class="form-select" id="color_scheme">
                                        <option value="default" selected>Default</option>
                                        <option value="dark">Dark</option>
                                        <option value="light">Light</option>
                                        <option value="custom">Custom</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="primary_color" class="form-label">Primary Color</label>
                                    <input type="color" class="form-control form-control-color" id="primary_color" value="#0d6efd">
                                </div>
                                <div class="mb-3">
                                    <label for="font_family" class="form-label">Font Family</label>
                                    <select class="form-select" id="font_family">
                                        <option value="system-ui" selected>System UI</option>
                                        <option value="Arial">Arial</option>
                                        <option value="Roboto">Roboto</option>
                                        <option value="Open Sans">Open Sans</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Notifications -->
                <div class="tab-pane fade" id="notifications">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title mb-4">Notification Settings</h5>
                            <form>
                                <div class="mb-3">
                                    <label class="form-label">Email Notifications</label>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="email_new_entry" checked>
                                        <label class="form-check-label" for="email_new_entry">
                                            New Entry Submission
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="email_status_update" checked>
                                        <label class="form-check-label" for="email_status_update">
                                            Status Updates
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="email_announcement" checked>
                                        <label class="form-check-label" for="email_announcement">
                                            New Announcements
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">System Notifications</label>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="system_new_entry" checked>
                                        <label class="form-check-label" for="system_new_entry">
                                            New Entry Submission
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="system_status_update" checked>
                                        <label class="form-check-label" for="system_status_update">
                                            Status Updates
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="system_announcement" checked>
                                        <label class="form-check-label" for="system_announcement">
                                            New Announcements
                                        </label>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Security -->
                <div class="tab-pane fade" id="security">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title mb-4">Security Settings</h5>
                            <form>
                                <div class="mb-3">
                                    <label for="password_policy" class="form-label">Password Policy</label>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="password_min_length" checked>
                                        <label class="form-check-label" for="password_min_length">
                                            Minimum 8 characters
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="password_uppercase" checked>
                                        <label class="form-check-label" for="password_uppercase">
                                            Require uppercase letters
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="password_numbers" checked>
                                        <label class="form-check-label" for="password_numbers">
                                            Require numbers
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="password_special" checked>
                                        <label class="form-check-label" for="password_special">
                                            Require special characters
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="session_timeout" class="form-label">Session Timeout (minutes)</label>
                                    <input type="number" class="form-control" id="session_timeout" value="30" min="5" max="120">
                                </div>
                                <div class="mb-3">
                                    <label for="max_login_attempts" class="form-label">Maximum Login Attempts</label>
                                    <input type="number" class="form-control" id="max_login_attempts" value="5" min="3" max="10">
                                </div>
                                <div class="mb-3">
                                    <label for="lockout_duration" class="form-label">Account Lockout Duration (minutes)</label>
                                    <input type="number" class="form-control" id="lockout_duration" value="30" min="15" max="1440">
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Backup & Restore -->
                <div class="tab-pane fade" id="backup">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title mb-4">Backup & Restore</h5>
                            <div class="mb-4">
                                <h6>Create Backup</h6>
                                <p class="text-muted">Create a complete backup of the system including database and files.</p>
                                <button type="button" class="btn btn-primary">
                                    <i class="fas fa-download me-2"></i>Create Backup
                                </button>
                            </div>
                            <div class="mb-4">
                                <h6>Restore Backup</h6>
                                <p class="text-muted">Restore the system from a previous backup file.</p>
                                <div class="mb-3">
                                    <input type="file" class="form-control" id="backup_file">
                                    <div class="form-text">Select a backup file to restore from.</div>
                                </div>
                                <button type="button" class="btn btn-warning">
                                    <i class="fas fa-upload me-2"></i>Restore Backup
                                </button>
                            </div>
                            <div>
                                <h6>Backup History</h6>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Size</th>
                                                <th>Type</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>2024-03-15 10:30</td>
                                                <td>256 MB</td>
                                                <td>Full Backup</td>
                                                <td><span class="badge bg-success">Completed</span></td>
                                                <td>
                                                    <button type="button" class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-sm btn-outline-danger">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>2024-03-14 15:45</td>
                                                <td>128 MB</td>
                                                <td>Database Only</td>
                                                <td><span class="badge bg-success">Completed</span></td>
                                                <td>
                                                    <button type="button" class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-sm btn-outline-danger">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- New Role Modal -->
<div class="modal fade" id="newRoleModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">New Role</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="role_name" class="form-label">Role Name</label>
                        <input type="text" class="form-control" id="role_name" required>
                    </div>
                    <div class="mb-3">
                        <label for="role_description" class="form-label">Description</label>
                        <textarea class="form-control" id="role_description" rows="3" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Permissions</label>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="perm_view_entries">
                            <label class="form-check-label" for="perm_view_entries">
                                View Entries
                            </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="perm_edit_entries">
                            <label class="form-check-label" for="perm_edit_entries">
                                Edit Entries
                            </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="perm_manage_users">
                            <label class="form-check-label" for="perm_manage_users">
                                Manage Users
                            </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="perm_manage_roles">
                            <label class="form-check-label" for="perm_manage_roles">
                                Manage Roles
                            </label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Create Role</button>
            </div>
        </div>
    </div>
</div>

<!-- Edit Role Modal -->
<div class="modal fade" id="editRoleModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit Role</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="edit_role_name" class="form-label">Role Name</label>
                        <input type="text" class="form-control" id="edit_role_name" value="BAI Staff" required>
                    </div>
                    <div class="mb-3">
                        <label for="edit_role_description" class="form-label">Description</label>
                        <textarea class="form-control" id="edit_role_description" rows="3" required>BAI-specific operations and approvals</textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Permissions</label>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="edit_perm_view_entries" checked>
                            <label class="form-check-label" for="edit_perm_view_entries">
                                View Entries
                            </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="edit_perm_edit_entries" checked>
                            <label class="form-check-label" for="edit_perm_edit_entries">
                                Edit Entries
                            </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="edit_perm_manage_users">
                            <label class="form-check-label" for="edit_perm_manage_users">
                                Manage Users
                            </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="edit_perm_manage_roles">
                            <label class="form-check-label" for="edit_perm_manage_roles">
                                Manage Roles
                            </label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>
</div>

{% block javascripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Handle color scheme change
    const colorScheme = document.getElementById('color_scheme');
    const primaryColor = document.getElementById('primary_color');
    
    if (colorScheme && primaryColor) {
        colorScheme.addEventListener('change', function() {
            if (this.value === 'custom') {
                primaryColor.disabled = false;
            } else {
                primaryColor.disabled = true;
            }
        });
    }
});
</script>
{% endblock %}
{% endblock %} 